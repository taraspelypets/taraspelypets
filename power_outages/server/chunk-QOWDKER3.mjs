import './polyfills.server.mjs';
import{A as F,B as $e,C as Ee,J as Be,L as ye,M as Q,N as q,O as je,P as X,Q as fe,R as Ye,S as We,T as Ge,U as Re,X as Ke,a as Ne,b as ae,ba as ze,c as ue,d as z,e as k,f as I,g as le,h as f,i as Z,j as $,k as g,l as He,m as y,n as p,o as G,p as P,q as L,r as _,s as ce,t as v,u as U,v as Ue,w as pe,x as de,y as me,z as J}from"./chunk-VN6X5B6W.mjs";import{e as mt,g as yt}from"./chunk-VVCT4QZE.mjs";var Je=mt((Fe,Oe)=>{"use strict";(function(n,e){typeof Fe=="object"&&typeof Oe<"u"?Oe.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self).dayjs=e()})(Fe,function(){"use strict";var n=1e3,e=6e4,i=36e5,t="millisecond",r="second",l="minute",O="hour",A="day",V="week",E="month",Ae="quarter",N="year",R="date",Ve="Invalid Date",lt=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,ct=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,pt={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(c){var a=["th","st","nd","rd"],o=c%100;return"["+c+(a[(o-20)%10]||a[o]||a[0])+"]"}},we=function(c,a,o){var u=String(c);return!u||u.length>=a?c:""+Array(a+1-u.length).join(o)+c},dt={s:we,z:function(c){var a=-c.utcOffset(),o=Math.abs(a),u=Math.floor(o/60),s=o%60;return(a<=0?"+":"-")+we(u,2,"0")+":"+we(s,2,"0")},m:function c(a,o){if(a.date()<o.date())return-c(o,a);var u=12*(o.year()-a.year())+(o.month()-a.month()),s=a.clone().add(u,E),d=o-s<0,m=a.clone().add(u+(d?-1:1),E);return+(-(u+(o-s)/(d?s-m:m-s))||0)},a:function(c){return c<0?Math.ceil(c)||0:Math.floor(c)},p:function(c){return{M:E,y:N,w:V,d:A,D:R,h:O,m:l,s:r,ms:t,Q:Ae}[c]||String(c||"").toLowerCase().replace(/s$/,"")},u:function(c){return c===void 0}},te="en",j={};j[te]=pt;var Pe="$isDayjsObject",Se=function(c){return c instanceof oe||!(!c||!c[Pe])},re=function c(a,o,u){var s;if(!a)return te;if(typeof a=="string"){var d=a.toLowerCase();j[d]&&(s=d),o&&(j[d]=o,s=d);var m=a.split("-");if(!s&&m.length>1)return c(m[0])}else{var C=a.name;j[C]=a,s=C}return!u&&s&&(te=s),s||!u&&te},x=function(c,a){if(Se(c))return c.clone();var o=typeof a=="object"?a:{};return o.date=c,o.args=arguments,new oe(o)},h=dt;h.l=re,h.i=Se,h.w=function(c,a){return x(c,{locale:a.$L,utc:a.$u,x:a.$x,$offset:a.$offset})};var oe=function(){function c(o){this.$L=re(o.locale,null,!0),this.parse(o),this.$x=this.$x||o.x||{},this[Pe]=!0}var a=c.prototype;return a.parse=function(o){this.$d=function(u){var s=u.date,d=u.utc;if(s===null)return new Date(NaN);if(h.u(s))return new Date;if(s instanceof Date)return new Date(s);if(typeof s=="string"&&!/Z$/i.test(s)){var m=s.match(lt);if(m){var C=m[2]-1||0,b=(m[7]||"0").substring(0,3);return d?new Date(Date.UTC(m[1],C,m[3]||1,m[4]||0,m[5]||0,m[6]||0,b)):new Date(m[1],C,m[3]||1,m[4]||0,m[5]||0,m[6]||0,b)}}return new Date(s)}(o),this.init()},a.init=function(){var o=this.$d;this.$y=o.getFullYear(),this.$M=o.getMonth(),this.$D=o.getDate(),this.$W=o.getDay(),this.$H=o.getHours(),this.$m=o.getMinutes(),this.$s=o.getSeconds(),this.$ms=o.getMilliseconds()},a.$utils=function(){return h},a.isValid=function(){return this.$d.toString()!==Ve},a.isSame=function(o,u){var s=x(o);return this.startOf(u)<=s&&s<=this.endOf(u)},a.isAfter=function(o,u){return x(o)<this.startOf(u)},a.isBefore=function(o,u){return this.endOf(u)<x(o)},a.$g=function(o,u,s){return h.u(o)?this[u]:this.set(s,o)},a.unix=function(){return Math.floor(this.valueOf()/1e3)},a.valueOf=function(){return this.$d.getTime()},a.startOf=function(o,u){var s=this,d=!!h.u(u)||u,m=h.p(o),C=function(W,S){var H=h.w(s.$u?Date.UTC(s.$y,S,W):new Date(s.$y,S,W),s);return d?H:H.endOf(A)},b=function(W,S){return h.w(s.toDate()[W].apply(s.toDate("s"),(d?[0,0,0,0]:[23,59,59,999]).slice(S)),s)},D=this.$W,w=this.$M,M=this.$D,K="set"+(this.$u?"UTC":"");switch(m){case N:return d?C(1,0):C(31,11);case E:return d?C(1,w):C(0,w+1);case V:var Y=this.$locale().weekStart||0,ne=(D<Y?D+7:D)-Y;return C(d?M-ne:M+(6-ne),w);case A:case R:return b(K+"Hours",0);case O:return b(K+"Minutes",1);case l:return b(K+"Seconds",2);case r:return b(K+"Milliseconds",3);default:return this.clone()}},a.endOf=function(o){return this.startOf(o,!1)},a.$set=function(o,u){var s,d=h.p(o),m="set"+(this.$u?"UTC":""),C=(s={},s[A]=m+"Date",s[R]=m+"Date",s[E]=m+"Month",s[N]=m+"FullYear",s[O]=m+"Hours",s[l]=m+"Minutes",s[r]=m+"Seconds",s[t]=m+"Milliseconds",s)[d],b=d===A?this.$D+(u-this.$W):u;if(d===E||d===N){var D=this.clone().set(R,1);D.$d[C](b),D.init(),this.$d=D.set(R,Math.min(this.$D,D.daysInMonth())).$d}else C&&this.$d[C](b);return this.init(),this},a.set=function(o,u){return this.clone().$set(o,u)},a.get=function(o){return this[h.p(o)]()},a.add=function(o,u){var s,d=this;o=Number(o);var m=h.p(u),C=function(w){var M=x(d);return h.w(M.date(M.date()+Math.round(w*o)),d)};if(m===E)return this.set(E,this.$M+o);if(m===N)return this.set(N,this.$y+o);if(m===A)return C(1);if(m===V)return C(7);var b=(s={},s[l]=e,s[O]=i,s[r]=n,s)[m]||1,D=this.$d.getTime()+o*b;return h.w(D,this)},a.subtract=function(o,u){return this.add(-1*o,u)},a.format=function(o){var u=this,s=this.$locale();if(!this.isValid())return s.invalidDate||Ve;var d=o||"YYYY-MM-DDTHH:mm:ssZ",m=h.z(this),C=this.$H,b=this.$m,D=this.$M,w=s.weekdays,M=s.months,K=s.meridiem,Y=function(S,H,ie,se){return S&&(S[H]||S(u,d))||ie[H].slice(0,se)},ne=function(S){return h.s(C%12||12,S,"0")},W=K||function(S,H,ie){var se=S<12?"AM":"PM";return ie?se.toLowerCase():se};return d.replace(ct,function(S,H){return H||function(ie){switch(ie){case"YY":return String(u.$y).slice(-2);case"YYYY":return h.s(u.$y,4,"0");case"M":return D+1;case"MM":return h.s(D+1,2,"0");case"MMM":return Y(s.monthsShort,D,M,3);case"MMMM":return Y(M,D);case"D":return u.$D;case"DD":return h.s(u.$D,2,"0");case"d":return String(u.$W);case"dd":return Y(s.weekdaysMin,u.$W,w,2);case"ddd":return Y(s.weekdaysShort,u.$W,w,3);case"dddd":return w[u.$W];case"H":return String(C);case"HH":return h.s(C,2,"0");case"h":return ne(1);case"hh":return ne(2);case"a":return W(C,b,!0);case"A":return W(C,b,!1);case"m":return String(b);case"mm":return h.s(b,2,"0");case"s":return String(u.$s);case"ss":return h.s(u.$s,2,"0");case"SSS":return h.s(u.$ms,3,"0");case"Z":return m}return null}(S)||m.replace(":","")})},a.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},a.diff=function(o,u,s){var d,m=this,C=h.p(u),b=x(o),D=(b.utcOffset()-this.utcOffset())*e,w=this-b,M=function(){return h.m(m,b)};switch(C){case N:d=M()/12;break;case E:d=M();break;case Ae:d=M()/3;break;case V:d=(w-D)/6048e5;break;case A:d=(w-D)/864e5;break;case O:d=w/i;break;case l:d=w/e;break;case r:d=w/n;break;default:d=w}return s?d:h.a(d)},a.daysInMonth=function(){return this.endOf(E).$D},a.$locale=function(){return j[this.$L]},a.locale=function(o,u){if(!o)return this.$L;var s=this.clone(),d=re(o,u,!0);return d&&(s.$L=d),s},a.clone=function(){return h.w(this.$d,this)},a.toDate=function(){return new Date(this.valueOf())},a.toJSON=function(){return this.isValid()?this.toISOString():null},a.toISOString=function(){return this.$d.toISOString()},a.toString=function(){return this.$d.toUTCString()},c}(),Le=oe.prototype;return x.prototype=Le,[["$ms",t],["$s",r],["$m",l],["$H",O],["$W",A],["$M",E],["$y",N],["$D",R]].forEach(function(c){Le[c[1]]=function(a){return this.$g(a,c[0],c[1])}}),x.extend=function(c,a){return c.$i||(c(a,oe,x),c.$i=!0),x},x.locale=re,x.isDayjs=Se,x.unix=function(c){return x(1e3*c)},x.en=j[te],x.Ls=j,x.p={},x})});var he={kyiv:{name:"kyiv",displayName:"\u041A\u0438\u0457\u0432",scheduleSource:"/assets/kyiv.json"},lviv:{name:"lviv",displayName:"\u041B\u044C\u0432\u0456\u0432",scheduleSource:"/assets/lviv.json"}};var T=[];for(let n=0;n<256;++n)T.push((n+256).toString(16).slice(1));function Ze(n,e=0){return(T[n[e+0]]+T[n[e+1]]+T[n[e+2]]+T[n[e+3]]+"-"+T[n[e+4]]+T[n[e+5]]+"-"+T[n[e+6]]+T[n[e+7]]+"-"+T[n[e+8]]+T[n[e+9]]+"-"+T[n[e+10]]+T[n[e+11]]+T[n[e+12]]+T[n[e+13]]+T[n[e+14]]+T[n[e+15]]).toLowerCase()}import ht from"crypto";var ve=new Uint8Array(256),ge=ve.length;function Me(){return ge>ve.length-16&&(ht.randomFillSync(ve),ge=0),ve.slice(ge,ge+=16)}import gt from"crypto";var ke={randomUUID:gt.randomUUID};function vt(n,e,i){if(ke.randomUUID&&!e&&!n)return ke.randomUUID();n=n||{};let t=n.random||(n.rng||Me)();if(t[6]=t[6]&15|64,t[8]=t[8]&63|128,e){i=i||0;for(let r=0;r<16;++r)e[i+r]=t[r];return e}return Ze(t)}var Ie=vt;var Qe=yt(Je()),Ce=class{constructor(){this.events=[]}addEvent(e,i,t){let r=`BEGIN:VEVENT
SUMMARY:${e}
UID:${Ie()}
DTSTART;TZID=Europe/Kyiv:${(0,Qe.default)(i).format("YYYYMMDDTHHmmss")}
DURATION:${this.parseDuration(t)}
RRULE:FREQ=WEEKLY
END:VEVENT`;return this.events.push(r),this}parseDuration(e){var i=0,t=0,r=0;return e>=60&&(t=e/60,i=e%60),t>=24&&(r=t/24,t=t%24),`P${r==0?"":r}T${t}H${i}M`}build(){return`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//ABC Corporation//NONSGML My Product//EN
${this.events.join(`
`)}
END:VCALENDAR`}};var _e=class{constructor(){this.events=[]}flattenDTEKSchedule(e,i){return this.traverseDays(e,i.getDay()),this.mergeSimiarEvents(),this.connectFirstAndLastEvent(),this.attachDateToEvents(i),this.events}mergeSimiarEvents(){let e=[],i;this.events.forEach(t=>{i==null||i.eventType!=t.eventType?(i=t,e.push(i)):i.duration=i.duration+t.duration}),this.events=e}connectFirstAndLastEvent(){if(this.events.length==0)return;let e=this.events[0],i=this.events[this.events.length-1];e!=i&&e.eventType==i.eventType&&(i.duration=i.duration+e.duration,this.events.shift())}attachDateToEvents(e){this.events.forEach(i=>{let t=new Date(e);t.setUTCHours(i.startHour,0,0,0);let r=i.dayOfTheWeek-1-e.getDay();t.setDate(t.getDate()+r),i.start=t})}traverseDays(e,i){this.getDaysOfTheWeekStartingFrom(i).forEach(t=>{this.traverseHours(e[t],t)})}traverseHours(e,i){Object.keys(e).forEach(t=>{let r={eventType:e[t],dayOfTheWeek:i,startHour:parseInt(t),duration:1};this.events.push(r)})}getDaysOfTheWeekStartingFrom(e){let i=[];for(let t=0;t<=6;t++)(e>7||e<1)&&(e=1),i.push(e),e++;return i}};var ee=class{constructor(){}fromDTEKData(e,i){let t=new _e().flattenDTEKSchedule(e,new Date);return this.applyLabels(t,i),this.buildICal(t)}buildICal(e){let i=new Ce;return e.forEach(t=>{t.start&&i.addEvent(t.eventSummary?t.eventSummary:t.eventType,t.start,t.duration*60)}),i.build()}applyLabels(e,i){e.forEach(t=>{t.eventType=="yes"?t.eventSummary=i.yes:t.eventType=="no"?t.eventSummary=i.no:t.eventType=="maybe"&&(t.eventSummary=i.maybe)})}};var be=[{name:"\u{1F7E2}\u{1F7E1}\u{1F534}",timeType:{yes:"\u{1F7E2}\u0421\u0432\u0456\u0442\u043B\u043E \u0454",no:"\u{1F534}\u0421\u0432\u0456\u0442\u043B\u0430 \u043D\u0435\u043C\u0430",maybe:"\u{1F7E1}\u041C\u043E\u0436\u043B\u0438\u0432\u0456 \u0432\u0456\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u043D\u044F"}},{name:"\u{1F7E9}\u{1F7E8}\u{1F7E5}",timeType:{yes:"\u{1F7E9}\u0421\u0432\u0456\u0442\u043B\u043E \u0454",no:"\u{1F7E5}\u0421\u0432\u0456\u0442\u043B\u0430 \u043D\u0435\u043C\u0430",maybe:"\u{1F7E8}\u041C\u043E\u0436\u043B\u0438\u0432\u0456 \u0432\u0456\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u043D\u044F"}},{name:"\u{1F435}\u{1F649}\u{1F648}",timeType:{yes:"\u{1F435}\u0421\u0432\u0456\u0442\u043B\u043E \u0454",no:"\u{1F648}\u0421\u0432\u0456\u0442\u043B\u0430 \u043D\u0435\u043C\u0430",maybe:"\u{1F649}\u041C\u043E\u0436\u043B\u0438\u0432\u0456 \u0432\u0456\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u043D\u044F"}},{name:"\u{1F4A1}\u{1F52E}\u{1F56F}\uFE0F",timeType:{yes:"\u{1F4A1}\u0421\u0432\u0456\u0442\u043B\u043E \u0454",no:"\u{1F56F}\uFE0F\u0421\u0432\u0456\u0442\u043B\u0430 \u043D\u0435\u043C\u0430",maybe:"\u{1F52E}\u041C\u043E\u0436\u043B\u0438\u0432\u0456 \u0432\u0456\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u043D\u044F"}},{name:"\u{1F496}\u2764\uFE0F\u200D\u{1FA79}\u{1F494}",timeType:{yes:"\u{1F496}\u0421\u0432\u0456\u0442\u043B\u043E \u0454",no:"\u{1F494}\u0421\u0432\u0456\u0442\u043B\u0430 \u043D\u0435\u043C\u0430",maybe:"\u2764\uFE0F\u200D\u{1FA79}\u041C\u043E\u0436\u043B\u0438\u0432\u0456 \u0432\u0456\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u043D\u044F"}},{name:"\u{1F425}\u{1F423}\u{1F95A}",timeType:{yes:"\u{1F425}\u0421\u0432\u0456\u0442\u043B\u043E \u0454",no:"\u{1F95A}\u0421\u0432\u0456\u0442\u043B\u0430 \u043D\u0435\u043C\u0430",maybe:"\u{1F423}\u041C\u043E\u0436\u043B\u0438\u0432\u0456 \u0432\u0456\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u043D\u044F"}},{name:"\u2747\uFE0F\u26A0\uFE0F\u26D4\uFE0F",timeType:{yes:"\u2747\uFE0F\u0421\u0432\u0456\u0442\u043B\u043E \u0454",no:"\u26D4\uFE0F\u0421\u0432\u0456\u0442\u043B\u0430 \u043D\u0435\u043C\u0430",maybe:"\u26A0\uFE0F\u041C\u043E\u0436\u043B\u0438\u0432\u0456 \u0432\u0456\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u043D\u044F"}},{name:"\u{1F7E2}\u{1F536}\u{1F53A}",timeType:{yes:"\u{1F7E2}\u0421\u0432\u0456\u0442\u043B\u043E \u0454",no:"\u{1F53A}\u0421\u0432\u0456\u0442\u043B\u0430 \u043D\u0435\u043C\u0430",maybe:"\u{1F536}\u041C\u043E\u0436\u043B\u0438\u0432\u0456 \u0432\u0456\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u043D\u044F"}}];var De=(()=>{let e=class e{constructor(t){this.httpClient=t}getOutageDataForCity(t){let r=he[t];return this.httpClient.get(r.scheduleSource)}};e.\u0275fac=function(r){return new(r||e)(ue(fe))},e.\u0275prov=ae({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Te=(()=>{let e=class e{constructor(t){this.httpClient=t}uploadTempFile(t,r){let l="https://tmpfiles.org/api/v1/upload",O=new FormData,A=new Blob([t],{type:"plain/text"});return O.append("file",A,r),this.httpClient.post(l,O).pipe(Ne(V=>{if(V.status=="success"){let E=V.data.url;V.data.url=E.replace("https://tmpfiles.org/","https://tmpfiles.org/dl/")}return V}))}};e.\u0275fac=function(r){return new(r||e)(ue(fe))},e.\u0275prov=ae({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function bt(n,e){if(n&1){let i=P();y(0,"button",11),L("click",function(){let r=k(i).$implicit,l=_(2);return I(l.selectTimeTypePreset(r.timeType))}),v(1),p()}if(n&2){let i=e.$implicit;f(),Ue(" ",i.name,"")}}function xt(n,e){if(n&1&&(y(0,"div",12)(1,"form",13)(2,"button",14),v(3,"\u0417\u0430\u0432\u0430\u043D\u0442\u0430\u0436\u0438\u0442\u0438"),p()(),y(4,"small"),v(5,"\u041F\u043E\u0441\u0438\u043B\u0430\u043D\u043D\u044F \u043D\u0430 \u0444\u0430\u0439\u043B (\u0434\u0456\u0454 1 \u0433\u043E\u0434\u0438\u043D\u0443):"),p(),y(6,"p",15),v(7),p()()),n&2){let i=_(2);f(),ce("action",i.fileLink,le),f(6),U(i.fileLink)}}function Dt(n,e){if(n&1){let i=P();y(0,"div",1)(1,"div",2)(2,"h5"),v(3,"\u041D\u0430\u043B\u0430\u0448\u0442\u0443\u0432\u0430\u043D\u043D\u044F"),p(),y(4,"p"),v(5,"\u0417\u043C\u0456\u043D\u0438\u0442\u0438 \u043D\u0430\u0437\u0432\u0438 \u043F\u043E\u0434\u0456\u0439, \u044F\u043A\u0456 \u0431\u0443\u0434\u0443\u0442\u044C \u0432\u0456\u0434\u043E\u0431\u0440\u0430\u0436\u0430\u0442\u0438\u0441\u044C \u0432 \u043A\u0430\u043B\u0435\u043D\u0434\u0430\u0440\u0456"),p(),y(6,"small"),v(7,"\u041F\u0440\u0435\u0441\u0435\u0442\u0438"),p(),y(8,"div",3)(9,"div",4),$(10,bt,2,1,"button",5),p()(),y(11,"div",6)(12,"label",7)(13,"small"),v(14,"\u0421\u0432\u0456\u0442\u043B\u043E \u0454"),p()(),y(15,"input",8),me("valueChange",function(r){k(i);let l=_();return de(l.timeType.yes,r)||(l.timeType.yes=r),I(r)}),p()(),y(16,"div",6)(17,"label",7)(18,"small"),v(19,"\u041C\u043E\u0436\u043B\u0438\u0432\u0456 \u0432\u0456\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u043D\u044F"),p()(),y(20,"input",8),me("valueChange",function(r){k(i);let l=_();return de(l.timeType.maybe,r)||(l.timeType.maybe=r),I(r)}),p()(),y(21,"div",6)(22,"label",7)(23,"small"),v(24,"\u0421\u0432\u0456\u0442\u043B\u0430 \u043D\u0435\u043C\u0430"),p()(),y(25,"input",8),me("valueChange",function(r){k(i);let l=_();return de(l.timeType.no,r)||(l.timeType.no=r),I(r)}),p()(),y(26,"button",9),L("click",function(){k(i);let r=_();return I(r.createIcal())}),v(27,"\u0421\u0442\u0432\u043E\u0440\u0438\u0442\u0438 \u043A\u0430\u043B\u0435\u043D\u0434\u0430\u0440"),p(),$(28,xt,8,2,"div",10),p()()}if(n&2){let i=_();f(10),g("ngForOf",i.timeTypePresets),f(5),pe("value",i.timeType.yes),f(5),pe("value",i.timeType.maybe),f(5),pe("value",i.timeType.no),f(3),g("ngIf",i.fileLink)}}var tt=(()=>{let e=class e{constructor(t,r){this.outageDaraSource=t,this.tempFileUploadService=r,this.timeTypePresets=be,this.city={name:"",displayName:"",scheduleSource:""},this.group="",this.schedule={},this.timeType=this.timeTypePresets[0].timeType}createIcal(){let t=new ee().fromDTEKData(this.schedule.data[this.group],this.timeType);this.fileLink="/link.ics"}createFilename(){return`${this.city.name}-${this.group}.ics`}selectTimeTypePreset(t){this.timeType=t}};e.\u0275fac=function(r){return new(r||e)(Z(De),Z(Te))},e.\u0275cmp=z({type:e,selectors:[["app-calendar-download-component"]],inputs:{city:"city",group:"group",schedule:"schedule"},standalone:!0,features:[J],decls:1,vars:1,consts:[["class","row",4,"ngIf"],[1,"row"],[1,"col"],[1,"col","mb-3","overflow-x-scroll","no-scroll-bar"],[1,"d-flex","align-items-start","justify-content-start","gap-1"],["type","button","class","btn btn-light text-nowrap",3,"click",4,"ngFor","ngForOf"],[1,"mb-3"],["for","timeTypeYes",1,"form-label","mb-0","pb-0"],["type","email","id","timeTypeYes","placeholder","",1,"form-control",3,"valueChange","value"],["type","button",1,"btn","btn-light","mb-2","w-100",3,"click"],["class","p-0 m-0",4,"ngIf"],["type","button",1,"btn","btn-light","text-nowrap",3,"click"],[1,"p-0","m-0"],["method","get",1,"p-0","mb-3",3,"action"],["type","submit",1,"btn","btn-primary","w-100"],[1,"fw-bold"]],template:function(r,l){r&1&&$(0,Dt,29,5,"div",0),r&2&&g("ngIf",l.city.name&&l.group)},dependencies:[X,Q,q]});let n=e;return n})();var nt={"1":{"1":"yes","2":"yes","3":"yes","4":"yes","5":"yes","6":"yes","7":"yes","8":"yes","9":"yes","10":"yes","11":"yes","12":"yes","13":"yes","14":"yes","15":"yes","16":"yes","17":"yes","18":"yes","19":"yes","20":"yes","21":"yes","22":"yes","23":"yes","24":"yes"},"2":{"1":"yes","2":"yes","3":"yes","4":"yes","5":"yes","6":"yes","7":"yes","8":"yes","9":"yes","10":"yes","11":"yes","12":"yes","13":"yes","14":"yes","15":"yes","16":"yes","17":"yes","18":"yes","19":"yes","20":"yes","21":"yes","22":"yes","23":"yes","24":"yes"},"3":{"1":"yes","2":"yes","3":"yes","4":"yes","5":"yes","6":"yes","7":"yes","8":"yes","9":"yes","10":"yes","11":"yes","12":"yes","13":"yes","14":"yes","15":"yes","16":"yes","17":"yes","18":"yes","19":"yes","20":"yes","21":"yes","22":"yes","23":"yes","24":"yes"},"4":{"1":"yes","2":"yes","3":"yes","4":"yes","5":"yes","6":"yes","7":"yes","8":"yes","9":"yes","10":"yes","11":"yes","12":"yes","13":"yes","14":"yes","15":"yes","16":"yes","17":"yes","18":"yes","19":"yes","20":"yes","21":"yes","22":"yes","23":"yes","24":"yes"},"5":{"1":"yes","2":"yes","3":"yes","4":"yes","5":"yes","6":"yes","7":"yes","8":"yes","9":"yes","10":"yes","11":"yes","12":"yes","13":"yes","14":"yes","15":"yes","16":"yes","17":"yes","18":"yes","19":"yes","20":"yes","21":"yes","22":"yes","23":"yes","24":"yes"},"6":{"1":"yes","2":"yes","3":"yes","4":"yes","5":"yes","6":"yes","7":"yes","8":"yes","9":"yes","10":"yes","11":"yes","12":"yes","13":"yes","14":"yes","15":"yes","16":"yes","17":"yes","18":"yes","19":"yes","20":"yes","21":"yes","22":"yes","23":"yes","24":"yes"},"7":{"1":"yes","2":"yes","3":"yes","4":"yes","5":"yes","6":"yes","7":"yes","8":"yes","9":"yes","10":"yes","11":"yes","12":"yes","13":"yes","14":"yes","15":"yes","16":"yes","17":"yes","18":"yes","19":"yes","20":"yes","21":"yes","22":"yes","23":"yes","24":"yes"}};var B=n=>({"day-today":n});function wt(n,e){if(n&1){let i=P();y(0,"td",9),L("click",function(){let r=k(i).$implicit,l=_().$implicit,O=_();return I(O.cycleType(r,l))}),G(1,"img",10),p()}if(n&2){let i=e.$implicit,t=_().$implicit,r=_();He("cell cell-",r.schedule[i][t],""),g("ngClass",F(5,B,r.isToday(i))),f(),ce("src",r.typeImage[r.schedule[i][t]],le)}}function St(n,e){if(n&1&&(y(0,"tr")(1,"td",7)(2,"div",3),v(3),p()(),$(4,wt,2,7,"td",8),p()),n&2){let i=e.$implicit,t=_();f(3),U(t.toHourLabel(i)),f(),g("ngForOf",t.days)}}function $t(n,e){if(n&1){let i=P();y(0,"button",11),L("click",function(){k(i);let r=_();return I(r.logSchedule())}),v(1,"Log schedule"),p()}}var it=(()=>{let e=class e{constructor(){this.schedule=nt,this.today=new Date,this.editable=!1,this.days=[1,2,3,4,5,6,7],this.hours=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],this.typeImage={yes:"/assets/yes-electricity.png",no:"/assets/no-electricity.png",maybe:"/assets/maybe-electricity.png"}}toHourLabel(t){return`${t.toString().padStart(2,"0")}:00`}isToday(t){return this.today.getDay()==t}cycleType(t,r){if(!this.editable)return;let l=this.schedule[t][r];l=="yes"?this.schedule[t][r]="maybe":l=="maybe"?this.schedule[t][r]="no":l=="no"?this.schedule[t][r]="yes":this.schedule[t][r]="yes"}logSchedule(){console.log(this.schedule)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=z({type:e,selectors:[["app-calendar-component"]],inputs:{schedule:"schedule"},standalone:!0,features:[J],decls:30,vars:24,consts:[[1,"table-container"],[1,"table",2,"background-color","transparent"],[1,"cell","cell-hour"],[1,"hour"],[1,"cell","cell-day","stick",3,"ngClass"],[4,"ngFor","ngForOf"],["type","button","class","btn btn-light text-nowrap",3,"click",4,"ngIf"],[1,"cell-hour"],[3,"class","ngClass","click",4,"ngFor","ngForOf"],[3,"click","ngClass"],["alt"," ",1,"type-icon",3,"src"],["type","button",1,"btn","btn-light","text-nowrap",3,"click"]],template:function(r,l){r&1&&(y(0,"div",0)(1,"table",1)(2,"tbody")(3,"tr")(4,"td",2)(5,"div",3),v(6),p()(),y(7,"td",4)(8,"div"),v(9,"\u041F\u043D"),p()(),y(10,"td",4)(11,"div"),v(12,"\u0412\u0442"),p()(),y(13,"td",4)(14,"div"),v(15,"\u0421\u0440"),p()(),y(16,"td",4)(17,"div"),v(18,"\u0427\u0442"),p()(),y(19,"td",4)(20,"div"),v(21,"\u041F\u0442"),p()(),y(22,"td",4)(23,"div"),v(24,"\u0421\u0431"),p()(),y(25,"td",4)(26,"div"),v(27,"\u041D\u0434"),p()()(),$(28,St,5,2,"tr",5),p()(),$(29,$t,2,0,"button",6),p()),r&2&&(f(6),U(l.toHourLabel(0)),f(),g("ngClass",F(10,B,l.isToday(1))),f(3),g("ngClass",F(12,B,l.isToday(2))),f(3),g("ngClass",F(14,B,l.isToday(3))),f(3),g("ngClass",F(16,B,l.isToday(4))),f(3),g("ngClass",F(18,B,l.isToday(5))),f(3),g("ngClass",F(20,B,l.isToday(6))),f(3),g("ngClass",F(22,B,l.isToday(7))),f(3),g("ngForOf",l.hours),f(),g("ngIf",l.editable))},dependencies:[X,ye,Q,q],styles:["td[_ngcontent-%COMP%]{background-color:transparent}.table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;background-color:transparent}.hour[_ngcontent-%COMP%]{transform:translateY(150%)}.cell-yes[_ngcontent-%COMP%]{background-color:transparent}.cell-maybe[_ngcontent-%COMP%]{background-color:#d3d3d380}.cell-no[_ngcontent-%COMP%]{background-color:#80808080}.stick[_ngcontent-%COMP%]{position:sticky;position:-webkit-sticky;top:0;z-index:2}.cell[_ngcontent-%COMP%]{align-items:center;text-align:center;height:50px;border-left:1px solid lightgray;border-bottom:1px dotted darkgrey;width:100%/8}.cell-hour[_ngcontent-%COMP%]{text-align:right;min-width:50px;border:none;padding:0 6px!important}.type-icon[_ngcontent-%COMP%]{height:16px;width:16px;user-select:none;-moz-user-select:none;-webkit-user-drag:none;-webkit-user-select:none;-ms-user-select:none}.day-today[_ngcontent-%COMP%]{border-right:2px solid rgb(184,86,86);border-left:2px solid rgb(184,86,86)}.day-today[_ngcontent-%COMP%]:before{width:15px;height:15px;border-radius:50%;background:red}.table-container[_ngcontent-%COMP%]{border-radius:16px;padding:8px;background-color:#f8f9fa}.cell-day[_ngcontent-%COMP%]{background-color:#ebebeb80}"]});let n=e;return n})();var rt=n=>({active:n});function Et(n,e){if(n&1){let i=P();y(0,"button",10),L("click",function(){let r=k(i).$implicit,l=_();return I(l.selectCity(r.value))}),v(1),p()}if(n&2){let i=e.$implicit,t=_();g("ngClass",F(2,rt,i.value.name==t.selectedCity.name)),f(),U(i.value.displayName)}}function Mt(n,e){if(n&1){let i=P();y(0,"button",10),L("click",function(){let r=k(i).$implicit,l=_(2);return I(l.selectGroup(r.key))}),v(1),p()}if(n&2){let i=e.$implicit,t=_(2);g("ngClass",F(2,rt,i.key==t.selectedGroup)),f(),U(i.value)}}function kt(n,e){if(n&1&&(y(0,"div",1)(1,"div",4)(2,"div",5),$(3,Mt,2,4,"button",6),$e(4,"keyvalue"),p()()()),n&2){let i=_();f(3),g("ngForOf",Ee(4,1,i.groups))}}function It(n,e){if(n&1&&(y(0,"div",1),G(1,"app-calendar-download-component",11),p()),n&2){let i=_();f(),g("city",i.selectedCity)("group",i.selectedGroup)("schedule",i.schedule)}}function Ft(n,e){n&1&&(y(0,"div",1)(1,"p"),v(2,"\u0429\u043E\u0431 \u043F\u0435\u0440\u0435\u0433\u043B\u044F\u043D\u0443\u0442\u0438 \u0433\u0440\u0430\u0444\u0456\u043A \u0432\u0456\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u044C \u0442\u0430 \u0437\u0433\u0435\u043D\u0435\u0440\u0443\u0432\u0430\u0442\u0438 \u043A\u0430\u043B\u0435\u043D\u0434\u0430\u0440, \u0432\u0438\u0431\u0435\u0440\u0456\u0442\u044C \u043C\u0456\u0441\u0442\u043E \u0442\u0430 \u0433\u0440\u0443\u043F\u0443."),p()())}function Ot(n,e){if(n&1&&G(0,"app-calendar-component",12),n&2){let i=_();g("schedule",i.schedule.data[i.selectedGroup])}}function At(n,e){n&1&&G(0,"app-calendar-component")}var ot=(()=>{let e=class e{constructor(t,r){this.outageDaraSource=t,this.tempFileUploadService=r,this.cities=he,this.selectedCity={name:"",displayName:"",scheduleSource:""},this.groups={},this.selectedGroup="",this.schedule={},this.timeTypePresets=be,this.timeType=this.timeTypePresets[0].timeType}selectCity(t){this.selectedCity=t,this.selectedGroup="",this.loadSchedule()}selectTimeTypePreset(t){this.timeType=t}selectGroup(t){this.selectedGroup=t}createIcal(){let t=new ee().fromDTEKData(this.schedule.data[this.selectedGroup],this.timeType);this.fileLink="/link.ics"}createFilename(){return`${this.selectedCity.name}-${this.selectedGroup}.ics`}loadSchedule(){this.outageDaraSource.getOutageDataForCity(this.selectedCity.name).subscribe(t=>this.setSchedule(t))}setSchedule(t){this.schedule=t,this.groups=t.sch_names,console.log(t)}};e.\u0275fac=function(r){return new(r||e)(Z(De),Z(Te))},e.\u0275cmp=z({type:e,selectors:[["app-root"]],standalone:!0,features:[J],decls:18,vars:8,consts:[[1,"container-fluid"],[1,"row"],[1,"row","pt-5"],[1,"col-md-6"],[1,"col","mb-3","overflow-x-scroll","no-scroll-bar"],[1,"d-flex","align-items-start","justify-content-start","gap-1"],["type","button","class","btn btn-light text-nowrap",3,"ngClass","click",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[3,"schedule",4,"ngIf"],[4,"ngIf"],["type","button",1,"btn","btn-light","text-nowrap",3,"click","ngClass"],[3,"city","group","schedule"],[3,"schedule"]],template:function(r,l){r&1&&(y(0,"div",0)(1,"div",1)(2,"h1"),v(3,"\u0413\u0440\u0430\u0444\u0456\u043A \u0432\u0456\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u044C \u0435\u043B\u0435\u043A\u0442\u0440\u043E\u0435\u043D\u0435\u0440\u0433\u0456\u0457"),p()(),y(4,"div",2)(5,"div",3)(6,"div",1)(7,"div",4)(8,"div",5),$(9,Et,2,4,"button",6),$e(10,"keyvalue"),p()()(),$(11,kt,5,3,"div",7),G(12,"div",1),$(13,It,2,3,"div",7)(14,Ft,3,0,"div",7),p(),y(15,"div",3),$(16,Ot,1,1,"app-calendar-component",8)(17,At,1,0,"app-calendar-component",9),p()()()),r&2&&(f(9),g("ngForOf",Ee(10,6,l.cities)),f(2),g("ngIf",l.selectedCity.name!=""),f(2),g("ngIf",l.selectedCity.name&&l.selectedGroup),f(),g("ngIf",!l.selectedCity.name||!l.selectedGroup),f(2),g("ngIf",l.selectedGroup),f(),g("ngIf",!l.selectedGroup))},dependencies:[X,ye,Q,q,je,We,tt,it]});let n=e;return n})();var st=[];var at={providers:[ze(st),Re(),Ye()]};var Vt={providers:[Ke()]},ut=Be(at,Vt);var Pt=()=>Ge(ot,ut),An=Pt;export{An as a};
